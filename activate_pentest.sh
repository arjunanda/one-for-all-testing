#!/bin/bash

# =============================================================================
# Pentest Environment Activator
# =============================================================================

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

echo -e "${BLUE}Activating Pentest Environment...${NC}"

# Check if virtual environment exists
if [ -d "pentest-venv" ]; then
    echo -e "${GREEN}Found Python virtual environment. Activating...${NC}"
    source pentest-venv/bin/activate 2>/dev/null || source pentest-venv/Scripts/activate 2>/dev/null
    
    if [ -n "$VIRTUAL_ENV" ]; then
        echo -e "${GREEN}✅ Virtual environment activated: $VIRTUAL_ENV${NC}"
    else
        echo -e "${YELLOW}⚠️  Could not activate virtual environment${NC}"
    fi
else
    echo -e "${YELLOW}⚠️  No virtual environment found. Run install_deps_fixed.sh first${NC}"
fi

# Add common tool directories to PATH if they exist
if [ -d "$HOME/go/bin" ]; then
    export PATH="$HOME/go/bin:$PATH"
    echo -e "${GREEN}✅ Added Go tools to PATH${NC}"
fi

if [ -d "$HOME/.local/bin" ]; then
    export PATH="$HOME/.local/bin:$PATH"
    echo -e "${GREEN}✅ Added local tools to PATH${NC}"
fi

# Set environment variables for pentest tools
export PENTEST_HOME="$(pwd)"
export WORDLIST_DIR="$HOME/.local/share/wordlists"

echo -e "${GREEN}✅ Environment ready for penetration testing${NC}"
echo -e "${BLUE}Run: ./pentest_suite.sh to start${NC}"
